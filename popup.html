<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Web Weaver Lightning v1.0</title>
<style>
:root {
--primary-color: #3498db;
--success-color: #27ae60;
--error-color: #e74c3c;
--warning-color: #f39c12;
--secondary-color: #95a5a6;
--dark-color: #2c3e50;
--light-bg: #f8f9fa;
--border-color: #e0e6ed;
--gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
--shadow-light: 0 2px 8px rgba(0,0,0,0.1);
--shadow-medium: 0 4px 16px rgba(0,0,0,0.15);
--shadow-heavy: 0 8px 24px rgba(0,0,0,0.2);
--border-radius: 8px;
--transition: all 0.2s ease;
}

* {
box-sizing: border-box;
}

body {
width: 480px;
min-height: 640px;
margin: 0;
padding: 20px;
font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
background: var(--gradient-primary);
color: var(--dark-color);
line-height: 1.5;
}

.container {
background: white;
border-radius: 12px;
padding: 24px;
box-shadow: var(--shadow-heavy);
min-height: 600px;
}

.header {
text-align: center;
margin-bottom: 24px;
padding-bottom: 20px;
border-bottom: 2px solid var(--light-bg);
}

.header h1 {
margin: 0;
color: var(--dark-color);
font-size: 28px;
font-weight: 700;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}

.header .version {
color: var(--secondary-color);
font-size: 13px;
margin-top: 8px;
font-weight: 500;
}

.controls {
display: grid;
grid-template-columns: 1fr auto;
gap: 12px;
margin-bottom: 20px;
align-items: center;
}

button {
background: var(--primary-color);
color: white;
border: none;
padding: 12px 16px;
border-radius: var(--border-radius);
cursor: pointer;
font-weight: 600;
font-size: 14px;
transition: var(--transition);
position: relative;
overflow: hidden;
}

button:hover:not(:disabled) {
background: #2980b9;
transform: translateY(-2px);
box-shadow: var(--shadow-medium);
}

button:disabled {
background: var(--secondary-color);
cursor: not-allowed;
transform: none;
box-shadow: none;
}

button:focus {
outline: 3px solid rgba(52, 152, 219, 0.3);
outline-offset: 2px;
}

.btn-config {
background: var(--warning-color);
}

.btn-config:hover:not(:disabled) {
background: #e67e22;
}

.status {
padding: 12px 16px;
border-radius: var(--border-radius);
margin-bottom: 16px;
font-weight: 600;
text-align: center;
font-size: 14px;
transition: var(--transition);
}

.status.success {
background: #d5f4e6;
color: var(--success-color);
border: 1px solid var(--success-color);
}

.status.error {
background: #f8d7da;
color: var(--error-color);
border: 1px solid var(--error-color);
}

.status.warning {
background: #fff3cd;
color: var(--warning-color);
border: 1px solid var(--warning-color);
}

.status.default {
background: var(--light-bg);
color: var(--dark-color);
border: 1px solid var(--border-color);
}

.status.loading {
background: #cce5ff;
color: var(--primary-color);
border: 1px solid var(--primary-color);
}

#loading {
display: none;
text-align: center;
padding: 16px;
color: var(--primary-color);
}

.loading-spinner {
display: inline-block;
width: 20px;
height: 20px;
border: 2px solid #f3f3f3;
border-top: 2px solid var(--primary-color);
border-radius: 50%;
animation: spin 1s linear infinite;
margin-right: 8px;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

#error {
display: none;
background: #f8d7da;
color: var(--error-color);
border: 1px solid var(--error-color);
padding: 12px 16px;
border-radius: var(--border-radius);
margin-bottom: 16px;
font-size: 13px;
}

.config-section {
background: var(--light-bg);
border-radius: var(--border-radius);
padding: 16px;
margin-bottom: 16px;
border: 1px solid var(--border-color);
}

.config-section h4 {
margin: 0 0 12px 0;
font-size: 14px;
color: var(--dark-color);
}

.input-group {
margin-bottom: 12px;
}

.input-group label {
display: block;
font-size: 12px;
font-weight: 500;
margin-bottom: 4px;
color: var(--dark-color);
}

.input-group input {
width: 100%;
padding: 8px 12px;
border: 1px solid var(--border-color);
border-radius: 4px;
font-size: 13px;
}

.input-group input:focus {
outline: none;
border-color: var(--primary-color);
}

.export-controls {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 10px;
margin-bottom: 16px;
}

.export-controls button {
font-size: 12px;
padding: 10px 12px;
background: var(--success-color);
font-weight: 600;
}

.export-controls button:hover:not(:disabled) {
background: #229954;
}

#output {
display: none;
background: var(--light-bg);
border: 1px solid var(--border-color);
border-radius: var(--border-radius);
padding: 16px;
max-height: 400px;
overflow-y: auto;
font-size: 13px;
line-height: 1.5;
}

.results-container {
font-family: inherit;
}

.result-section {
margin-bottom: 20px;
padding: 12px;
background: white;
border-radius: 6px;
border: 1px solid #ddd;
}

.result-section h3 {
margin: 0 0 12px 0;
font-size: 14px;
color: var(--dark-color);
}

.info-item, .ai-item, .structure-item {
margin-bottom: 8px;
font-size: 12px;
}

.ai-results {
border-left: 4px solid var(--primary-color);
}

.error-section {
border-left: 4px solid var(--error-color);
}

.error-info {
background: #fee;
color: var(--error-color);
padding: 8px;
border-radius: 4px;
font-size: 11px;
}

::-webkit-scrollbar {
width: 8px;
}

::-webkit-scrollbar-track {
background: #f1f1f1;
border-radius: 4px;
}

::-webkit-scrollbar-thumb {
background: var(--secondary-color);
border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
background: #7f8c8d;
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>üï∏Ô∏è Web Weaver</h1>
<div class="version">v1.0 Lightning Edition - Day 4</div>
</div>

<div class="controls">
<button id="extractBtn">Extract with AI</button>
<button id="configBtn" class="btn-config">‚öôÔ∏è</button>
</div>

<div id="configSection" class="config-section" style="display: none;">
<h4>üîë API Configuration</h4>
<div class="input-group">
<label for="apiKeyInput">OpenAI API Key:</label>
<input type="password" id="apiKeyInput" placeholder="sk-..." autocomplete="off">
</div>
<button id="saveApiKey">Save API Key</button>
</div>

<div id="loading">
<div class="loading-spinner"></div>
Processing with AI...
</div>

<div id="status" class="status default">
üöÄ Ready: Click "Extract with AI" to start!
</div>

<div id="error"></div>

<div class="export-controls">
<button id="exportJSON" disabled>üìÑ JSON</button>
<button id="exportCSV" disabled>üìä CSV</button>
<button id="copyBtn" disabled>üìã Copy</button>
</div>

<div id="output"></div>
</div>

<script src="popup.js"></script>
</body>
</html>
